---
title: "TA_class_1017"
author: "Hochia"
date: 2019-10-15T21:13:14-05:00
output: 
  html_document:
    toc: true
    toc_float: true
    toc_depth: 3
categories: ["R"]
tags: ["R Markdown", "tidyverse"]
---

<script src="/r-statistics/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="new-project" class="section level1">
<h1>New Project</h1>
<p>File &gt; New Project..</p>
<center>
<div class="figure">
<img src="fig_00.PNG" alt="" />
<p class="caption">New Project</p>
</div>
</center>
<p>Set the directory name and the subdirectory.</p>
</div>
<div id="r-markdown" class="section level1">
<h1>R Markdown</h1>
<p>You can write the report with RMarkdown. It can generate HTML, PDF, Word, and PPT documents. Furthermore, math equations can be write with LaTex format.</p>
<blockquote>
<p>Find the cheet sheet from <em>Help &gt; Cheetsheets &gt; R Markdown Cheet Sheet</em></p>
</blockquote>
<p>Create your R Markdown!</p>
<center>
<div class="figure">
<img src="fig_01.PNG" alt="" />
<p class="caption">R Markdown</p>
</div>
</center>
<p>Add the title and author name.</p>
<center>
<div class="figure">
<img src="fig_02.PNG" alt="" />
<p class="caption">Setup</p>
</div>
</center>
<p>Kick the “Knit” button.</p>
<center>
<div class="figure">
<img src="fig_03.PNG" alt="" />
<p class="caption">Knit</p>
</div>
</center>
<p>Then you will see the following example.</p>
<div id="r-markdown-1" class="section level2">
<h2>R Markdown</h2>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:</p>
<pre class="r"><code>summary(cars)</code></pre>
<pre><code>#&gt;      speed           dist       
#&gt;  Min.   : 4.0   Min.   :  2.00  
#&gt;  1st Qu.:12.0   1st Qu.: 26.00  
#&gt;  Median :15.0   Median : 36.00  
#&gt;  Mean   :15.4   Mean   : 42.98  
#&gt;  3rd Qu.:19.0   3rd Qu.: 56.00  
#&gt;  Max.   :25.0   Max.   :120.00</code></pre>
</div>
<div id="including-plots" class="section level2">
<h2>Including Plots</h2>
<p>You can also embed plots, for example:</p>
<p><img src="/r-statistics/post/20191016/TA_class_1017_files/figure-html/pressure-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Note that the <code>echo = FALSE</code> parameter was added to the code chunk to prevent printing of the R code that generated the plot.</p>
</div>
</div>
<div id="r-code-chunks" class="section level1">
<h1>R Code Chunks</h1>
<p>shortcut</p>
<p><code>Ctrl + Alt + I</code> on Windows</p>
<p><code>Cmd + Option + I</code> on macOS</p>
<p>Add your R code in code chunk, then R Markdown will run it.</p>
<pre><code>```{r}
summary(cars)
```</code></pre>
<pre class="r"><code>summary(cars)</code></pre>
<pre><code>#&gt;      speed           dist       
#&gt;  Min.   : 4.0   Min.   :  2.00  
#&gt;  1st Qu.:12.0   1st Qu.: 26.00  
#&gt;  Median :15.0   Median : 36.00  
#&gt;  Mean   :15.4   Mean   : 42.98  
#&gt;  3rd Qu.:19.0   3rd Qu.: 56.00  
#&gt;  Max.   :25.0   Max.   :120.00</code></pre>
<pre><code>```{r}
x = 5  # radius of a circle
```</code></pre>
<pre><code>For a circle with the radius `r x`,
its area is `r pi * x^2`.</code></pre>
<pre class="r"><code>x = 5  # radius of a circle</code></pre>
<p>For a circle with the radius 5,
its area is 78.5398163.</p>
</div>
<div id="latex" class="section level1">
<h1>LaTex</h1>
<p>Use <code>$</code> to add math equations in the paragraph.</p>
<p><code>the acceptance rate in $95\%$ confidence</code></p>
<p>the acceptance rate in <span class="math inline">\(95\%\)</span> confidence</p>
<p>Use <code>$$</code> to add math equations in single or multiple lines.</p>
<pre><code>$$
f_X(x) = {x-1 \choose r-1} p^r (1-p)^{x-r} I_{(r,r+1, \dots)} (x)
$$</code></pre>
<p><span class="math display">\[
f_X(x) = {x-1 \choose r-1} p^r (1-p)^{x-r} I_{(r,r+1, \dots)} (x)
\]</span></p>
<pre><code>$$
\begin{aligned}
f_X(x) = {x-1 \choose r-1} p^r (1-p)^{x-r} I_{(r,r+1, \dots)} (x)
f_X(x) = {x-1 \choose r-1} p^r (1-p)^{x-r} I_{(r,r+1, \dots)} (x)
\end{aligned}
$$</code></pre>
<p><span class="math display">\[
\begin{aligned}
f_X(x) = {x-1 \choose r-1} p^r (1-p)^{x-r} I_{(r,r+1, \dots)} (x)\\
f_X(x) = {x-1 \choose r-1} p^r (1-p)^{x-r} I_{(r,r+1, \dots)} (x)
\end{aligned}
\]</span></p>
<p>For more information, see <a href="https://latex.wikia.org/wiki/List_of_LaTeX_symbols">Latex</a> in Wiki.</p>
</div>
<div id="wrangle-with-data" class="section level1">
<h1>Wrangle with Data</h1>
<div id="prerequisite" class="section level2">
<h2>Prerequisite</h2>
<pre class="r"><code># install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
<pre><code>#&gt; -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>#&gt; √ ggplot2 3.3.3     √ purrr   0.3.4
#&gt; √ tibble  3.0.6     √ dplyr   1.0.4
#&gt; √ tidyr   1.1.2     √ stringr 1.4.0
#&gt; √ readr   1.4.0     √ forcats 0.5.1</code></pre>
<pre><code>#&gt; -- Conflicts ------------------------------------------ tidyverse_conflicts() --
#&gt; x dplyr::filter() masks stats::filter()
#&gt; x dplyr::lag()    masks stats::lag()</code></pre>
<p>Tidyverse contains the packages you may need to use in data science, including ggplot2, dplyr, etc. So you do not need to install them individually.</p>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<pre class="r"><code>ggplot2::mpg</code></pre>
<pre><code>#&gt; # A tibble: 234 x 11
#&gt;    manufacturer model    displ  year   cyl trans   drv     cty   hwy fl    class
#&gt;    &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
#&gt;  1 audi         a4         1.8  1999     4 auto(l~ f        18    29 p     comp~
#&gt;  2 audi         a4         1.8  1999     4 manual~ f        21    29 p     comp~
#&gt;  3 audi         a4         2    2008     4 manual~ f        20    31 p     comp~
#&gt;  4 audi         a4         2    2008     4 auto(a~ f        21    30 p     comp~
#&gt;  5 audi         a4         2.8  1999     6 auto(l~ f        16    26 p     comp~
#&gt;  6 audi         a4         2.8  1999     6 manual~ f        18    26 p     comp~
#&gt;  7 audi         a4         3.1  2008     6 auto(a~ f        18    27 p     comp~
#&gt;  8 audi         a4 quat~   1.8  1999     4 manual~ 4        18    26 p     comp~
#&gt;  9 audi         a4 quat~   1.8  1999     4 auto(l~ 4        16    25 p     comp~
#&gt; 10 audi         a4 quat~   2    2008     4 manual~ 4        20    28 p     comp~
#&gt; # ... with 224 more rows</code></pre>
<p><code>?ggplot2::mpg</code> # For more information</p>
<p>Or you can simply call <code>?mpg</code> if you had already call the library.</p>
</div>
<div id="select-columns-with-select" class="section level2">
<h2>Select columns with <code>select()</code></h2>
<pre class="r"><code>df &lt;- select(mpg, manufacturer, cty, hwy, class)
df
summary(df)
table(df %&gt;% select(manufacturer, class))</code></pre>
<pre class="r"><code>df &lt;- select(mpg, manufacturer, cty, hwy, class)
df</code></pre>
<pre><code>#&gt; # A tibble: 234 x 4
#&gt;    manufacturer   cty   hwy class  
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 audi            18    29 compact
#&gt;  2 audi            21    29 compact
#&gt;  3 audi            20    31 compact
#&gt;  4 audi            21    30 compact
#&gt;  5 audi            16    26 compact
#&gt;  6 audi            18    26 compact
#&gt;  7 audi            18    27 compact
#&gt;  8 audi            18    26 compact
#&gt;  9 audi            16    25 compact
#&gt; 10 audi            20    28 compact
#&gt; # ... with 224 more rows</code></pre>
<pre class="r"><code>summary(df)</code></pre>
<pre><code>#&gt;  manufacturer            cty             hwy           class          
#&gt;  Length:234         Min.   : 9.00   Min.   :12.00   Length:234        
#&gt;  Class :character   1st Qu.:14.00   1st Qu.:18.00   Class :character  
#&gt;  Mode  :character   Median :17.00   Median :24.00   Mode  :character  
#&gt;                     Mean   :16.86   Mean   :23.44                     
#&gt;                     3rd Qu.:19.00   3rd Qu.:27.00                     
#&gt;                     Max.   :35.00   Max.   :44.00</code></pre>
<pre class="r"><code>table(df %&gt;% select(manufacturer, class))</code></pre>
<pre><code>#&gt;             class
#&gt; manufacturer 2seater compact midsize minivan pickup subcompact suv
#&gt;   audi             0      15       3       0      0          0   0
#&gt;   chevrolet        5       0       5       0      0          0   9
#&gt;   dodge            0       0       0      11     19          0   7
#&gt;   ford             0       0       0       0      7          9   9
#&gt;   honda            0       0       0       0      0          9   0
#&gt;   hyundai          0       0       7       0      0          7   0
#&gt;   jeep             0       0       0       0      0          0   8
#&gt;   land rover       0       0       0       0      0          0   4
#&gt;   lincoln          0       0       0       0      0          0   3
#&gt;   mercury          0       0       0       0      0          0   4
#&gt;   nissan           0       2       7       0      0          0   4
#&gt;   pontiac          0       0       5       0      0          0   0
#&gt;   subaru           0       4       0       0      0          4   6
#&gt;   toyota           0      12       7       0      7          0   8
#&gt;   volkswagen       0      14       7       0      0          6   0</code></pre>
</div>
<div id="filter-rows-with-filter" class="section level2">
<h2>Filter rows with <code>filter()</code></h2>
<p>Logic “and”</p>
<pre class="r"><code>filter(df, class == &quot;compact&quot;, cty &lt; 20)</code></pre>
<pre><code>#&gt; # A tibble: 21 x 4
#&gt;    manufacturer   cty   hwy class  
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 audi            18    29 compact
#&gt;  2 audi            16    26 compact
#&gt;  3 audi            18    26 compact
#&gt;  4 audi            18    27 compact
#&gt;  5 audi            18    26 compact
#&gt;  6 audi            16    25 compact
#&gt;  7 audi            19    27 compact
#&gt;  8 audi            15    25 compact
#&gt;  9 audi            17    25 compact
#&gt; 10 audi            17    25 compact
#&gt; # ... with 11 more rows</code></pre>
<p>Logic “or”</p>
<p>These three are equivalent.</p>
<pre class="r"><code>filter(df, class == &quot;compact&quot; | class == &quot;suv&quot;)
df %&gt;% filter(class == &quot;compact&quot; | class == &quot;suv&quot;)
df %&gt;% filter(class %in% c(&quot;compact&quot;, &quot;suv&quot;))</code></pre>
<pre class="r"><code>filter(df, class == &quot;compact&quot; | class == &quot;suv&quot;)</code></pre>
<pre><code>#&gt; # A tibble: 109 x 4
#&gt;    manufacturer   cty   hwy class  
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 audi            18    29 compact
#&gt;  2 audi            21    29 compact
#&gt;  3 audi            20    31 compact
#&gt;  4 audi            21    30 compact
#&gt;  5 audi            16    26 compact
#&gt;  6 audi            18    26 compact
#&gt;  7 audi            18    27 compact
#&gt;  8 audi            18    26 compact
#&gt;  9 audi            16    25 compact
#&gt; 10 audi            20    28 compact
#&gt; # ... with 99 more rows</code></pre>
<pre class="r"><code>df %&gt;% filter(class == &quot;compact&quot; | class == &quot;suv&quot;)</code></pre>
<pre><code>#&gt; # A tibble: 109 x 4
#&gt;    manufacturer   cty   hwy class  
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 audi            18    29 compact
#&gt;  2 audi            21    29 compact
#&gt;  3 audi            20    31 compact
#&gt;  4 audi            21    30 compact
#&gt;  5 audi            16    26 compact
#&gt;  6 audi            18    26 compact
#&gt;  7 audi            18    27 compact
#&gt;  8 audi            18    26 compact
#&gt;  9 audi            16    25 compact
#&gt; 10 audi            20    28 compact
#&gt; # ... with 99 more rows</code></pre>
<pre class="r"><code>df %&gt;% filter(class %in% c(&quot;compact&quot;, &quot;suv&quot;))</code></pre>
<pre><code>#&gt; # A tibble: 109 x 4
#&gt;    manufacturer   cty   hwy class  
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 audi            18    29 compact
#&gt;  2 audi            21    29 compact
#&gt;  3 audi            20    31 compact
#&gt;  4 audi            21    30 compact
#&gt;  5 audi            16    26 compact
#&gt;  6 audi            18    26 compact
#&gt;  7 audi            18    27 compact
#&gt;  8 audi            18    26 compact
#&gt;  9 audi            16    25 compact
#&gt; 10 audi            20    28 compact
#&gt; # ... with 99 more rows</code></pre>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p>You can work this way!</p>
<pre class="r"><code>mpg %&gt;%
  select(manufacturer, cty, hwy, class) %&gt;%
  filter(class %in% c(&quot;compact&quot;, &quot;suv&quot;))</code></pre>
<pre><code>#&gt; # A tibble: 109 x 4
#&gt;    manufacturer   cty   hwy class  
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 audi            18    29 compact
#&gt;  2 audi            21    29 compact
#&gt;  3 audi            20    31 compact
#&gt;  4 audi            21    30 compact
#&gt;  5 audi            16    26 compact
#&gt;  6 audi            18    26 compact
#&gt;  7 audi            18    27 compact
#&gt;  8 audi            18    26 compact
#&gt;  9 audi            16    25 compact
#&gt; 10 audi            20    28 compact
#&gt; # ... with 99 more rows</code></pre>
</div>
</div>
<div id="homework" class="section level1">
<h1>Homework</h1>
<p>Wrangle with <code>ggplot2::mpg</code> and show the result.</p>
<ol style="list-style-type: decimal">
<li><p>Select <code>manufacturer</code>, <code>year</code>, and <code>displ</code>.</p></li>
<li><p>Filter <code>year</code> is 1999 and <code>displ &lt; 2</code>.</p></li>
</ol>
<p>Reference solution</p>
<pre><code>#&gt; # A tibble: 234 x 3
#&gt;    manufacturer  year displ
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt;
#&gt;  1 audi          1999   1.8
#&gt;  2 audi          1999   1.8
#&gt;  3 audi          2008   2  
#&gt;  4 audi          2008   2  
#&gt;  5 audi          1999   2.8
#&gt;  6 audi          1999   2.8
#&gt;  7 audi          2008   3.1
#&gt;  8 audi          1999   1.8
#&gt;  9 audi          1999   1.8
#&gt; 10 audi          2008   2  
#&gt; # ... with 224 more rows</code></pre>
<pre><code>#&gt; # A tibble: 17 x 3
#&gt;    manufacturer  year displ
#&gt;    &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt;
#&gt;  1 audi          1999   1.8
#&gt;  2 audi          1999   1.8
#&gt;  3 audi          1999   1.8
#&gt;  4 audi          1999   1.8
#&gt;  5 honda         1999   1.6
#&gt;  6 honda         1999   1.6
#&gt;  7 honda         1999   1.6
#&gt;  8 honda         1999   1.6
#&gt;  9 honda         1999   1.6
#&gt; 10 toyota        1999   1.8
#&gt; 11 toyota        1999   1.8
#&gt; 12 toyota        1999   1.8
#&gt; 13 volkswagen    1999   1.9
#&gt; 14 volkswagen    1999   1.9
#&gt; 15 volkswagen    1999   1.9
#&gt; 16 volkswagen    1999   1.8
#&gt; 17 volkswagen    1999   1.8</code></pre>
</div>
